<view class="dashboard-container">
  <!-- çŠ¶æ€æ å ä½ -->
  <view class="status-bar" style="height:{{statusBarHeight}}px;"></view>
  
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="header" style="top:{{statusBarHeight}}px;">
    <view class="header-title">ç®¡ç†å‘˜æ§åˆ¶å°</view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-area">
    <!-- è¿”å›ç”¨æˆ·ç•Œé¢æŒ‰é’® -->
    <view class="back-to-user-container">
      <view class="back-to-user" bindtap="backToUserInterface">
        <text class="back-icon">â†</text>
        <text>è¿”å›ç”¨æˆ·ç•Œé¢</text>
      </view>
    </view>
    
    <!-- å·¥å…·åŒºåŸŸ -->
    <view class="tools-section">
      <view class="section-title">ç®¡ç†å·¥å…·</view>
      <view class="tools-grid">
        <view class="tool-card" bindtap="navigateToDataInit">
          <view class="tool-icon-container">
            <text class="tool-icon">âš™ï¸</text>
          </view>
          <view class="tool-label">æ•°æ®åˆå§‹åŒ–</view>
          <view class="tool-desc">åˆå§‹åŒ–æµ‹è¯•æ•°æ®</view>
        </view>
      </view>
    </view>

    <!-- æ•°æ®ç»Ÿè®¡åŒºåŸŸ -->
    <view class="data-section">
      <view class="section-title">æ•°æ®ç»Ÿè®¡</view>
      
      <view class="stats-grid">
        <!-- æœ¬æœˆè¥æ”¶ -->
        <view class="stat-card month-revenue">
          <view class="stat-label">æœ¬æœˆè¥æ”¶</view>
          <view class="stat-icon-container yellow">
            <text class="currency">Â¥</text>
          </view>
          <view class="stat-value" wx:if="{{!statsLoading}}">Â¥{{stats.monthlyRevenue}}</view>
          <view class="stat-value loading" wx:else>åŠ è½½ä¸­...</view>
        </view>
        
        <!-- æœ¬å‘¨è¥æ”¶ -->
        <view class="stat-card week-revenue">
          <view class="stat-label">æœ¬å‘¨è¥æ”¶</view>
          <view class="stat-icon-container blue">
            <text class="stat-icon">ğŸ“Š</text>
          </view>
          <view class="stat-value" wx:if="{{!statsLoading}}">Â¥{{stats.weeklyRevenue}}</view>
          <view class="stat-value loading" wx:else>åŠ è½½ä¸­...</view>
        </view>
        
        <!-- æœ¬æœˆé”€å”®é‡ -->
        <view class="stat-card month-sales">
          <view class="stat-label">æœ¬æœˆé”€å”®é‡</view>
          <view class="stat-icon-container green">
            <text class="stat-icon">ğŸ›ï¸</text>
          </view>
          <view class="stat-value" wx:if="{{!statsLoading}}">{{stats.monthlySales}}</view>
          <view class="stat-value loading" wx:else>åŠ è½½ä¸­...</view>
        </view>
        
        <!-- åº“å­˜å•†å“ -->
        <view class="stat-card inventory">
          <view class="stat-label">åº“å­˜å•†å“</view>
          <view class="stat-icon-container brown">
            <text class="stat-icon">ğŸ“¦</text>
          </view>
          <view class="stat-value" wx:if="{{!statsLoading}}">{{stats.inventory}}</view>
          <view class="stat-value loading" wx:else>åŠ è½½ä¸­...</view>
        </view>
      </view>
    </view>

    <!-- æœ€è¿‘è®¢å• -->
    <view class="recent-orders-section">
      <view class="section-header">
        <text class="section-title">æœ€è¿‘è®¢å•</text>
        <view class="view-all" bindtap="viewAllOrders">
          <text>æŸ¥çœ‹å…¨éƒ¨</text>
          <text class="arrow">></text>
        </view>
      </view>

      <view class="order-list">
        <!-- åŠ è½½ä¸­æ˜¾ç¤º -->
        <view class="loading-state" wx:if="{{ordersLoading}}">
          <view class="loading-spinner"></view>
          <text>æ­£åœ¨åŠ è½½è®¢å•...</text>
        </view>
        
        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-state" wx:if="{{!ordersLoading && recentOrders.length === 0}}">
          <text class="empty-icon">ğŸ“„</text>
          <text class="empty-text">æš‚æ— è®¢å•æ•°æ®</text>
        </view>
        
        <!-- è®¢å•åˆ—è¡¨ -->
        <block wx:if="{{!ordersLoading && recentOrders.length > 0}}">
          <view class="order-item" wx:for="{{recentOrders}}" wx:key="_id">
            <view class="order-basic-info">
              <view class="order-number">
                <text>è®¢å•å·: {{item.orderNumber}}</text>
              </view>
              <view class="order-time">{{item.formattedCreatedAt}}</view>
            </view>
            
            <view class="order-customer-info">
              <text class="user-avatar-text">ğŸ‘¤</text>
              <view class="customer-name">{{item.address.name}}</view>
            </view>
            
            <view class="order-status-info">
              <view class="order-products">{{item.products.length}}ä»¶å•†å“</view>
              <view class="order-amount">Â¥{{item.totalAmount}}</view>
              <view class="order-status {{item.status}}">{{item.statusText}}</view>
            </view>
          </view>
        </block>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å¯¼èˆªæ  -->
  <admin-tab-bar activeTab="dashboard"></admin-tab-bar>
</view> 