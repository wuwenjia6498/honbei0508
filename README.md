# 梧桐小姐烘焙小程序

## 项目简介
梧桐小姐烘焙小程序是一个专注于提供优质烘焙产品的移动端应用。通过简洁优雅的界面设计，为用户提供便捷的烘焙产品浏览、选购和配送服务。

## 项目特点
- 🎨 优雅的UI设计：采用简约现代的设计风格，符合苹果设计美学
- 🛒 便捷购物体验：流畅的商品浏览、购物车管理和结账流程
- 📱 响应式设计：适配不同尺寸的移动设备
- 🍞 优质产品展示：突出展示新鲜烘焙产品的特色

## 技术栈
### 前端
- 微信小程序原生框架
- WXML (微信小程序标记语言)
- WXSS (微信小程序样式语言)
- JavaScript 
- 微信小程序API
- 组件库：Vant Weapp（开箱即用的 UI 组件）

### 后端
- Node.js 服务端环境
- Express.js 后端框架
- MongoDB 数据库
- 微信云开发（云函数、云数据库、云存储）
- RESTful API 设计规范
- JWT 用户身份验证
- 微信支付接口集成

## 项目开发计划

### 第一阶段：前端小程序页面开发
基于7张UI原型图，开发微信小程序前端界面

#### UI原型图
```
├── UI/                  # 前端界面原型图
│   ├── index.PNG       # 首页
│   ├── product.PNG     # 商品详情页
│   ├── categories.PNG  # 分类页
│   ├── cart.PNG        # 购物车页面
│   ├── checkout.PNG    # 结账页面
│   ├── profile.PNG     # 个人中心
│   └── order.PNG       # 订单详情页
```

#### 前端页面结构
前端小程序包含以下主要页面：

1. **首页 (index.PNG)**
   - 展示今日新鲜产品
   - 推荐商品展示
   - 促销活动展示

2. **商品详情页 (product.PNG)**
   - 商品详细信息
   - 产品图片展示
   - 规格选择
   - 加入购物车功能

3. **分类页 (categories.PNG)**
   - 分类列表展示
   - 类别筛选商品
   - 支持多级分类

4. **购物车页面 (cart.PNG)**
   - 商品列表展示
   - 数量调整
   - 价格计算
   - 结算入口

5. **结账页面 (checkout.PNG)**
   - 配送信息填写
   - 支付方式选择
   - 订单确认

6. **个人中心 (profile.PNG)**
   - 用户信息管理
   - 订单历史查看
   - 收藏夹管理

7. **订单详情页 (order.PNG)**
   - 订单状态跟踪
   - 订单详细信息
   - 配送进度

#### 前端设计风格
- 主色调：采用温暖的棕色系 (#8D6E63, #A1887F)
- 字体：清晰易读的现代字体
- 布局：简洁大方，重点突出
- 交互：流畅自然的用户体验

### 第二阶段：后端管理系统开发
完成前端开发后，进行后端管理系统的开发

#### 后端管理系统功能
- **商品管理**：添加、编辑、下架商品，管理库存
- **分类管理**：创建和管理商品分类
- **订单管理**：查看和处理订单，更新订单状态
- **用户管理**：查看用户信息，处理用户反馈
- **数据统计**：销售数据分析，用户行为分析
- **系统设置**：小程序基本设置，支付配置等


## 开发任务清单
### 前端小程序开发
- [ ] 基础框架搭建
- [ ] 首页开发
- [ ] 商品详情页开发
- [ ] 分类页开发
- [ ] 购物车功能实现
- [ ] 结账流程开发
- [ ] 个人中心开发
- [ ] 订单详情页开发
- [ ] 用户登录与注册功能实现
- [ ] 微信支付系统集成
- [ ] 小程序性能优化

### 后端管理系统开发
- [ ] 管理系统框架搭建
- [ ] 商品管理功能开发
- [ ] 分类管理功能开发
- [ ] 订单管理系统开发
- [ ] 用户管理功能开发
- [ ] 数据统计与分析功能
- [ ] 系统设置功能开发

## 使用说明
1. 使用微信开发者工具打开项目文件夹
2. 首先基于七张原型UI设计图，开发前端小程序页面
3. 完成前端开发后，进行后端管理系统开发

## 贡献指南
欢迎提交 Issue 和 Pull Request 来帮助改进项目。

## 许可证
本项目采用 MIT 许可证。

## 联系方式
如有任何问题或建议，请联系项目维护者。

## 地址管理功能说明

地址管理功能允许用户添加、编辑、删除和设置默认收货地址，以便在下单时快速选择收货地址。

### 主要功能

1. **地址列表**：展示用户所有保存的收货地址，默认地址会显示在最前面
2. **新增地址**：用户可以添加新的收货地址
3. **编辑地址**：修改已有的收货地址信息
4. **删除地址**：删除不需要的收货地址
5. **设置默认地址**：设置常用的收货地址为默认地址
6. **选择地址**：从结算页面进入时可选择一个地址用于订单配送

### 技术实现

地址管理功能基于微信小程序云开发实现：

1. **前端页面**：
   - 地址列表页（address-list）：展示所有地址并提供管理入口
   - 地址编辑页（address-edit）：用于新增和编辑地址

2. **后端实现**：
   - 使用云函数（addressService）处理地址的增删改查
   - 数据存储在云开发数据库的 addresses 集合中

3. **数据结构**：
   - 地址数据结构包含：姓名、手机号、地区、详细地址、是否默认等信息

### 使用方法

1. **查看地址列表**：
   - 在"我的"页面点击"收货地址"进入地址列表页面

2. **添加新地址**：
   - 在地址列表页面点击底部"添加新地址"按钮
   - 填写收货人姓名、手机号、所在地区、详细地址等信息
   - 可选择是否设为默认地址
   - 点击"保存地址"完成添加

3. **编辑地址**：
   - 在地址列表中点击需要编辑的地址或点击"编辑"图标
   - 修改地址信息后点击"保存地址"完成编辑

4. **删除地址**：
   - 在编辑地址页面点击"删除地址"按钮
   - 或在地址列表中点击地址右侧的"删除"图标

5. **设置默认地址**：
   - 在地址列表中找到需要设为默认的地址，点击"设为默认"

6. **选择地址**：
   - 在结算页面点击地址栏进入地址列表
   - 点击需要使用的地址即可选择并返回结算页面 

## 项目清理记录

### 2025年5月清理内容

以下内容已被清理，以优化项目结构：

#### 已删除的空目录
- `images/tab/` - 空目录
- `images/icon/` - 空目录
- `miniprogram/` - 未使用的目录

#### 已删除的临时文件
- `static/demo/` - 未使用的演示图片

#### 已删除的未使用云函数
- `adminStats/` - 功能已合并至userService
- `clearUsers/` - 未使用的测试函数
- `insertTestUsers/` - 未使用的测试函数
- `initUsers/` - 未使用的初始化函数
- `getAdminOrders/` - 未被调用的函数
- `getFileUrls/` - 未被调用的函数
- `getOrders/` - 未被调用的函数

#### 已保留但标记为废弃的云函数
- `userSearch/` - 保留为占位函数，解决编译错误，但功能已由userManager替代

#### 已删除的可重建产物
- `miniprogram_npm/` - 可通过npm install重建
- `node_modules/` - 可通过npm install重建

#### 保留的重要目录
- `UI/` - 前端界面原型图，作为设计参考
- `ui-hd/` - 管理后台界面原型图，作为设计参考
- `assets/images/icons/` - 关键图标资源
- `images/icons/` - 使用中的图标资源

### 2025年5月9日更新
在项目清理后，对npm引用进行了优化：

1. 调整了项目配置，优化了npm包的引用方式
2. 暂时移除了全局组件注册，避免编译错误
3. 删除的`miniprogram_npm`目录需要在微信开发者工具中重新构建

**注意**：首次使用时，请按照以下步骤操作：
1. 使用微信开发者工具打开项目
2. 在项目设置中勾选"使用npm模块"
3. 点击顶部菜单"工具" -> "构建npm"
4. 等待构建完成后，刷新项目
5. 如果仍有组件未找到的错误，请检查各页面的组件引用路径

**组件引用建议**：
- 在各页面的json文件中使用相对路径引用组件: `"van-icon": "../../miniprogram_npm/@vant/weapp/icon/index"`
- 或在构建npm成功后再添加全局组件注册 